# log-analyzer v2.1.0 Release Notes

## ğŸ“¦ å‘å¸ƒæ—¶é—´

2026-02-12

## ğŸš€ æ–°åŠŸèƒ½

### æ—¥å¿—å½’æ¡£åŠŸèƒ½

**æ–°å¢å‘½ä»¤**ï¼š
- `archive <file>` - å½’æ¡£å•ä¸ªæ—¥å¿—æ–‡ä»¶
- `archive-dir <dir>` - å½’æ¡£ç›®å½•ä¸­çš„æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
- `archive-stats` - æ˜¾ç¤ºå½’æ¡£ç»Ÿè®¡

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- âœ… **è‡ªåŠ¨å‹ç¼©**ï¼šæ”¯æŒ gzip å‹ç¼©ï¼ŒèŠ‚çœç©ºé—´ï¼ˆå‹ç¼©ç‡ ~90%ï¼‰
- âœ… **æŒ‰æ—¥æœŸç»„ç»‡**ï¼šå½’æ¡£æ–‡ä»¶æŒ‰æ—¥æœŸç»„ç»‡ï¼Œä¾¿äºæŸ¥æ‰¾
- âœ… **å®šæ—¶æ¸…ç†**ï¼šå½’æ¡£ X å¤©åçš„æ–‡ä»¶
- âœ… **è¯¦ç»†ç»Ÿè®¡**ï¼šæ˜¾ç¤ºå½’æ¡£æ–‡ä»¶æ•°ã€èŠ‚çœç©ºé—´ã€å‹ç¼©ç‡
- âœ… **å¹²è¿è¡Œæ¨¡å¼**ï¼šé¢„è§ˆå½’æ¡£æ“ä½œï¼Œä¸çœŸæ­£æ‰§è¡Œ

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```bash
# å½’æ¡£å•ä¸ªæ–‡ä»¶
log-analyzer archive app.log

# å½’æ¡£å¹¶å‹ç¼©
log-analyzer archive app.log --compress

# å½’æ¡£åˆ°æŒ‡å®šç›®å½•
log-analyzer archive app.log --archive-dir ./archive

# å½’æ¡£å¹¶æ¸…ç† 7 å¤©åçš„æ–‡ä»¶
log-analyzer archive app.log --delete-after 7

# å½’æ¡£ç›®å½•
log-analyzer archive-dir /var/log/myapp --compress

# æ˜¾ç¤ºå½’æ¡£ç»Ÿè®¡
log-analyzer archive-stats --archive-dir ./archive
```

**åœºæ™¯ç¤ºä¾‹**ï¼š

```bash
# åœºæ™¯ 1: å¼€å‘ç¯å¢ƒæ—¥å¿—å½’æ¡£
log-analyzer archive dev-server.log --compress

# åœºæ™¯ 2: ç”Ÿäº§ç¯å¢ƒæ—¥å¿—å½’æ¡£ï¼ˆå®šæ—¶æ¸…ç†ï¼‰
log-analyzer archive-dir /var/log/production --compress --delete-after 30

# åœºæ™¯ 3: æµ‹è¯•å½’æ¡£åŠŸèƒ½ï¼ˆä¸çœŸæ­£æ‰§è¡Œï¼‰
log-analyzer archive app.log --dry-run

# åœºæ™¯ 4: æŸ¥çœ‹å½’æ¡£ç»Ÿè®¡
log-analyzer archive-stats
```

---

## ğŸ› Bug ä¿®å¤

- âœ… ä¿®å¤äº†æ–‡ä»¶å¤§å°è®¡ç®—é—®é¢˜ï¼ˆä¹‹å‰æ˜¾ç¤º NaNï¼‰
- âœ… ä¿®å¤äº†å‹ç¼©ç‡è®¡ç®—é—®é¢˜
- âœ… ä¿®å¤äº†å½’æ¡£æ¨¡å—çš„å˜é‡åˆå§‹åŒ–é—®é¢˜
- âœ… æ”¹è¿›äº†é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

---

## ğŸ“– æ–‡æ¡£æ”¹è¿›

- âœ… æ›´æ–°äº† README.mdï¼ˆæ–°å¢å½’æ¡£åŠŸèƒ½è¯´æ˜ï¼‰
- âœ… æ·»åŠ äº†å½’æ¡£åŠŸèƒ½ä½¿ç”¨ç¤ºä¾‹
- âœ… æ·»åŠ äº†åœºæ™¯ç¤ºä¾‹
- âœ… æ”¹è¿›äº†å‘½ä»¤å¸®åŠ©ä¿¡æ¯

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- âœ… ä½¿ç”¨ gzip å‹ç¼©ï¼ŒèŠ‚çœ ~90% å­˜å‚¨ç©ºé—´
- âœ… ä¼˜åŒ–çš„æ–‡ä»¶è¯»å–å’Œå†™å…¥
- âœ… å‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶æ“ä½œ

---

## ğŸ”§ æŠ€æœ¯æ”¹è¿›

- âœ… æ–°å¢ `archive.js` æ¨¡å—ï¼ˆ~720 è¡Œä»£ç ï¼‰
- âœ… æ–°å¢ 4 ä¸ª CLI å‘½ä»¤
- âœ… æ”¹è¿›äº†é”™è¯¯å¤„ç†
- âœ… å¢åŠ äº†è¯¦ç»†çš„ç”¨æˆ·æç¤º

---

## ğŸ“¦ å®‰è£…

```bash
# ä½¿ç”¨ npx ç›´æ¥è¿è¡Œ
npx @raphaellcs/log-analyzer archive app.log

# å…¨å±€å®‰è£…
npm install -g @raphaellcs/log-analyzer

# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
npm update -g @raphaellcs/log-analyzer
```

---

## ğŸ¯ ä½¿ç”¨æ¡ˆä¾‹

### ç”¨ä¾‹ 1: è‡ªåŠ¨æ—¥å¿—å½’æ¡£ï¼ˆCronï¼‰

```bash
# æ·»åŠ åˆ° crontab - æ¯å¤©å‡Œæ™¨ 3 ç‚¹å½’æ¡£æ—¥å¿—
0 3 * * * /usr/bin/npx @raphaellcs/log-analyzer archive-dir /var/log/myapp --compress
```

### ç”¨ä¾‹ 2: æ—¥å¿—è½®è½¬ + å½’æ¡£

```bash
# å…ˆè½®è½¬æ—¥å¿—ï¼ˆä½¿ç”¨ logrotateï¼‰
/usr/sbin/logrotate /etc/logrotate.d/myapp.conf

# ç„¶åå½’æ¡£æ—§æ—¥å¿—
/usr/bin/npx @raphaellcs/log-analyzer archive-dir /var/log/myapp/archive --compress
```

### ç”¨ä¾‹ 3: ä¸´æ—¶å¤‡ä»½

```bash
# å¿«é€Ÿå¤‡ä»½å½“å‰æ—¥å¿—ï¼ˆä½¿ç”¨ gzip å‹ç¼©ï¼‰
npx @raphaellcs/log-analyzer archive current.log --compress
```

---

## ğŸ“ API å˜åŒ–

**æ–°å¢å‘½ä»¤**ï¼š
- `archive <file>` - å½’æ¡£å•ä¸ªæ—¥å¿—æ–‡ä»¶
- `archive-dir <dir>` - å½’æ¡£ç›®å½•ä¸­çš„æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
- `archive-stats` - æ˜¾ç¤ºå½’æ¡£ç»Ÿè®¡

**æ–°å¢é€‰é¡¹**ï¼š
- `--archive-dir <path>` - æŒ‡å®šå½’æ¡£ç›®å½•
- `--compress` - å¯ç”¨ gzip å‹ç¼©
- `--delete-after <days>` - å½’æ¡£ X å¤©åçš„æ–‡ä»¶
- `--dry-run` - é¢„è§ˆæ¨¡å¼

---

## ğŸ“Š ç»Ÿè®¡

- **æ–°å¢ä»£ç è¡Œæ•°**ï¼š~720 è¡Œ
- **æ–°å¢æ¨¡å—æ•°**ï¼š1 ä¸ªï¼ˆarchive.jsï¼‰
- **æ–°å¢å‘½ä»¤æ•°**ï¼š4 ä¸ª
- **æ–°å¢åŠŸèƒ½æ•°**ï¼š6 ä¸ª
- **ä¿®å¤ Bug æ•°**ï¼š3 ä¸ª
- **æ–‡æ¡£æ›´æ–°æ•°**ï¼š10+ å¤„

---

## ğŸš€ å‡çº§æŒ‡å—

### ä» v2.0.0 å‡çº§

```bash
# å‡çº§åˆ° v2.1.0
npm update -g @raphaellcs/log-analyzer

# éªŒè¯æ–°åŠŸèƒ½
log-analyzer archive-stats
```

### è¿ç§»æŒ‡å—

å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ v2.0.0ï¼Œä½ å¯ä»¥ï¼š
1. ç›´æ¥å‡çº§ï¼Œä¸ä¼šå½±å“ç°æœ‰åŠŸèƒ½
2. æ–°å¢çš„å½’æ¡£åŠŸèƒ½æ˜¯ç‹¬ç«‹çš„æ–°åŠŸèƒ½
3. æ‰€æœ‰ç°æœ‰å‘½ä»¤ä¿æŒä¸å˜

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ç”¨æˆ·å’Œè´¡çŒ®è€…çš„åé¦ˆï¼

ç‰¹åˆ«æ„Ÿè°¢ä»¥ä¸‹ç”¨æˆ·ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æäº¤äº† Issues å’Œå»ºè®®ï¼š
- [åˆ—å‡ºåé¦ˆç”¨æˆ·]

---

## ğŸ“§ è”ç³»æ–¹å¼

- **GitHub**: https://github.com/RaphaelLcs-financial/log-analyzer
- **npm**: https://www.npmjs.com/package/@raphaellcs/log-analyzer
- **Email**: mengxin_1888888@163.com
- **Sponsor**: https://github.com/sponsors/RaphaelLcs-financial

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

**å‘å¸ƒè€…**: æ¢¦å¿ƒ
**ç‰ˆæœ¬**: v2.1.0
**å‘å¸ƒæ—¥æœŸ**: 2026-02-12
